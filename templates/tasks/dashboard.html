{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-5">
    <div>
        <h2 class="mb-0">My Space</h2>
        <p style="color: rgba(255,255,255,0.5);">Welcome, {{ request.user.username }}</p>
    </div>
    <a href="{% url 'add_task' %}" class="btn btn-primary">
        <i class="fas fa-plus"></i> New
    </a>
</div>

{% if not groups %}
    <div class="text-center py-5" style="color: rgba(255,255,255,0.3);">
        <i class="fas fa-wind fa-3x mb-3"></i>
        <h4>It's quiet here.</h4>
        <p>Create a project to get started.</p>
    </div>
{% else %}
    <div class="row">
        {% for group in groups %}
        <div class="col-12">
            <div class="task-card">
                <div class="task-header d-flex justify-content-between align-items-center">
                    <span style="color: var(--neon-accent);"><i class="fas fa-cube me-2"></i> {{ group.title }}</span>
                    <small style="opacity: 0.5;">{{ group.created_at|date:"M d" }}</small>
                </div>
                <div class="list-group list-group-flush">
                    {% for task in group.tasks.all %}
                    <div class="list-group-item border-0 px-4 py-3 d-flex justify-content-between align-items-center"
                         style="background: transparent; border-bottom: 1px solid rgba(255,255,255,0.05) !important;">

                        <div class="d-flex align-items-center">
                            <a href="{% url 'toggle_task' task.id %}" class="text-decoration-none me-3">
                                {% if task.is_completed %}
                                    <i class="fas fa-check-circle fa-lg text-success"></i>
                                {% else %}
                                    <i class="far fa-circle fa-lg text-secondary hover-grow"></i>
                                {% endif %}
                            </a>

                            <span class="fw-500 {% if task.is_completed %}text-decoration-line-through text-muted{% endif %}"
                                  style="color: {% if task.is_completed %}rgba(255,255,255,0.3){% else %}#fff{% endif %};">
                                {{ task.description }}
                            </span>
                        </div>

                        <span class="badge rounded-pill" style="background: rgba(255,255,255,0.1); color: #fff;">
                            {{ task.due_date|date:"M d" }}
                        </span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
{% endif %}

<div class="text-center mt-5">
    <a href="{% url 'logout' %}" style="color: rgba(255,255,255,0.4); transition: 0.3s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='rgba(255,255,255,0.4)'">
        <i class="fas fa-power-off me-1"></i> Disconnect
    </a>
</div>
{% endblock %}


